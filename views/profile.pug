doctype html
head
  meta(charset='utf-8')
  meta(name='viewport' content='width=device-width, initial-scale=1')
  link(rel='shortcut icon' href='/favicon.svg')
  title Keyoxide
  link(rel='stylesheet' href='/static/styles.css')
  
main.container.container--profile
  .content
    div#app(style='display: none;')
        span#profileUid(style='display: none;') #{uid}
        span#profileMode(style='display: none;') #{mode}
        #profileHeader
            img#profileAvatar(src='/static/img/avatar_placeholder.png' alt='avatar' style='display: none')
            p#profileName
        #profileData
            div.profileDataItem.profileDataItem--separator.profileDataItem--noLabel
                div.profileDataItem__label
                div.profileDataItem__value general information

            div.profileDataItem(v-if='userMail != null')
                div.profileDataItem__label primary email
                div.profileDataItem__value
                     a(v-bind:href="'mailto:' + userMail") {{userMail}}

            div.profileDataItem(v-if='fingerprint != null')
               div.profileDataItem__label fingerprint
               div.profileDataItem__value
                   a(v-bind:href="'https://keys.openpgp.org/pks/lookup?op=get&options=mr&search=0x' + fingerprint") {{fingerprint}} 
                   a.proofQR.green(v-if="fingerprint != ''", v-bind:href="'/util/qr/' + encodeURIComponent(`OPENPGP4FPR:${fingerprint.toUpperCase()}`)", target="_blank", title="QR Code") <svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#ffffff" d="M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z" /></svg>

        template
          div.profileDataItem.profileDataItem--separator.profileDataItem--noLabel
              div.profileDataItem__label
              div.profileDataItem__value proofs

          div.profileProofs(v-if='notifications.length == 0')
            div.profileDataItem.profileDataItem--noLabel
                div.profileDataItem__label
                div.profileDataItem__value Verifying proofs&hellip;

          //- p(v-if='notifications.length == 0') Loading keys &amp; verifying proofs&mldr;
          div(v-for="notification in notifications")
            div(v-if='notification.display != null')
              div.profileDataItem
                  div.profileDataItem__label {{notification.type}}
                  div.profileDataItem__value
                    a.proofDisplay(:href='notification.proofUrl', target='_BLANK') {{notification.display}}
                      a.proofUrl.proofUrl--verified(:href='notification.proofUrl', target='_BLANK', v-if='notification.isVerified') verified &#10004;
                      a.proofUrl(:href='notification.proofUrl', target='_BLANK', v-if='!notification.isVerified') unverified
        div.profileDataItem.profileDataItem--separator.profileDataItem--noLabel
            div.profileDataItem__label
            div.profileDataItem__value actions

        div.profileDataItem.profileDataItem--noLabel
            div.profileDataItem__label
            div.profileDataItem__value
                a(v-bind:href="'/verify/' + mode + '/' + input") verify signature

        div.profileDataItem.profileDataItem--noLabel
            div.profileDataItem__label
            div.profileDataItem__value
                a(v-bind:href="'/encrypt/' + mode + '/' + input") encrypt message
  footer
    p
      | Generated by 
      a(href='/') Keyoxide
      |  (
      a(href="https://codeberg.org/keyoxide/web/releases")= settings.keyoxide_version
      | ).

script(src='/static/openpgp.min.js', defer=true)
script(src='/static/vue.min.js', defer=true)
script(type='application/javascript' src='/static/lib.js' charset='utf-8', defer=true)
script(src='/static/profile.js', defer=true)
